(function(){"use strict";var e={6004:function(e,t,n){var i=n(144),o=n(998),s=n(6232),l=n(5550),r=n(9223),a=n(5808),c=n(4525),h=n(5200),u=n(3059),d=n(8515),p=n(8949),f=n(1023),g=n(7953),v=function(){var e=this,t=e._self._c;return t(o.Z,[t(d.Z,{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(a.Z,{attrs:{nav:""}},[t(c.Z,[t(h.km,[t(h.V9,{staticClass:"text-h6"},[e._v(" JðŸŒ° Bicycle Bell ")])],1)],1),t(r.Z),t(c.Z,[t(p.Z,{staticClass:"ma-2",attrs:{items:void 0!=e.$refs.bell?e.$refs.bell.types:[],dense:"",outlined:"","hide-details":"","return-object":"",label:"Stimme"},on:{change:e.changeBellType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),t(c.Z,[t(f.Z,{attrs:{inset:"",label:"Autoplay"},on:{change:e.changeBellType},model:{value:e.auto,callback:function(t){e.auto=t},expression:"auto"}})],1),t(c.Z,[e._v("1.0")])],1)],1),t(s.Z,{attrs:{app:""}},[t(l.Z,{on:{click:function(t){e.drawer=!e.drawer}}}),t(g.qW,[e._v("JðŸŒ° Bicycle Bell")])],1),t(u.Z,[t("MainBell",{ref:"bell"})],1),t("UpdateDialog",{ref:"updateDialog"}),t("InstallDialog",{ref:"installDialog"})],1)},b=[],m=n(4562),w=n(4324),y=n(3305),Z=n(7423),_=function(){var e=this,t=e._self._c;return t("div",{ref:"bellDiv",staticClass:"bellDiv"},[t(Z.Z,{attrs:{height:"100vh"}},[e.offline||e.ignore?t("div",{staticClass:"w-100 text-center"},[t(m.Z,{style:e.bellStyle,attrs:{icon:"",disabled:!e.enabled&&!e.touching},on:{touchstart:e.touchstart,touchend:e.touchend}},[e.enabled?t(w.Z,{attrs:{size:e.bellSize}},[e._v("mdi-bell-ring-outline")]):e.auto?t(y.Z,{attrs:{size:e.progSize,color:"primary",indeterminate:""}}):e._e()],1)],1):t("div",{staticClass:"w-100 text-center text-h3 pa-3"},[e._v(" Please use airplane mode!"),t("br"),t(w.Z,{attrs:{size:e.bellSize}},[e._v("mdi-airplane-check")]),t("br"),t(m.Z,{attrs:{elevation:"2","x-large":""},on:{click:e.ign}},[e._v("Ignore")])],1)])],1)},k=[],x=n(5977),S=n.n(x),I=n(4117);const D={0:[0,2.7],1:[2.7,5.18],2:[5.2,6.8],3:[6.9,7.8],4:[7.8,9.4],5:[9.4,10.9],6:[10.9,13],7:[13.1,14.7],8:[14.7,15.6],9:[15.7,16],10:[16,16.8],11:[16.8,18.6],12:[18.6,19.2],13:[19.3,19.6]},T={sopran:new(S())({source:"/audio/sopran.mp3",sprite:D}),alt:new(S())({source:"/audio/alt.mp3",sprite:D}),bariton:new(S())({source:"/audio/bariton.mp3",sprite:D})};var B={data:()=>({iWidth:0,iHeight:0,iTop:0,offline:!1,ignore:!1,type:"sopran",types:["sopran","alt","bariton"],auto:!1,enabled:!0,touching:!1}),computed:{bellStyle(){return{width:this.iWidth+"px",height:this.iHeight+"px",top:this.iTop+"px"}},bellSize(){return(.5*this.iWidth).toString()+"px"},progSize(){return.5*this.iWidth}},methods:{set_config(e,t){this.auto=e,this.type=t},ign(){this.ignore=!0},reenable(){this.enabled=!0,this.touching&this.auto&&this.ring()},ring(){this.enabled=!1;const e=T[this.type],t=Object.keys(e.sprite),n=t[Math.floor(Math.random()*t.length)];e[n]["play"](),this.auto?setTimeout(this.reenable,700+Math.floor(500*Math.random())):setTimeout(this.reenable,250)},touchstart(){this.touching=!0,this.enabled&&this.ring()},touchend(){this.touching=!1},update_size(){if(this.$refs.bellDiv){let e=Math.min(this.$refs.bellDiv.clientHeight,this.$refs.bellDiv.clientWidth);this.iWidth=e-20,this.iHeight=this.iWidth,this.iTop=Math.max(0,this.$refs.bellDiv.clientHeight-this.$refs.bellDiv.clientWidth-30)}}},mounted(){window.addEventListener("resize",(()=>{this.update_size()})),setTimeout(this.update_size(),5e3),(0,I.Y)((e=>{this.offline=e}))}},E=B,$=n(1001),C=(0,$.Z)(E,_,k,!1,null,"474f3a88",null),O=C.exports,M=n(9582),P=n(4886),j=n(4061),W=n(8718),z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(j.Z,{attrs:{"max-width":"300px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(M.Z,[t(P.EB,[e._v("Update")]),t(P.ZB,[t("p",[e._v("Eine neue Version is vorhanden.")]),t(m.Z,{attrs:{color:"primary",block:""},on:{click:function(t){return e.refreshApp()}}},[e._v(" Update ")])],1),t(r.Z),t(P.h7,[t(W.Z),t(m.Z,{attrs:{color:"secondary",text:""},on:{click:function(t){e.show=!1}}},[e._v(" Close ")])],1)],1)],1)],1)},A=[],N={data(){return{show:!1,worker:void 0}},methods:{refreshApp(){this.show=!1,this.worker?(this.worker.postMessage({type:"SKIP_WAITING"}),console.log("skipWaiting finished")):console.warn("No worker data found when trying to refresh!")}}},U=N,L=(0,$.Z)(U,z,A,!1,null,null,null),H=L.exports,J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(j.Z,{attrs:{"max-width":"300px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(M.Z,[t(P.EB,[e._v("Installieren?")]),e.installed?t(P.ZB,[t("p",[e._v("Du kannst auch die installierte App verwenden.")]),t(m.Z,{attrs:{color:"primary",block:""},on:{click:e.open}},[e._v(" App ")])],1):e._e(),e.canInstall?t(P.ZB,[t("p",[e._v("Wenn du mÃ¶chtest, kann die App installiert werden.")]),t(m.Z,{attrs:{color:"primary",block:""},on:{click:e.triggerInstall}},[e._v(" Installieren ")])],1):e._e(),t(r.Z),t(P.h7,[t(W.Z),t(m.Z,{attrs:{color:"secondary",text:""},on:{click:function(t){e.show=!1}}},[e._v(" Close ")])],1)],1)],1)],1)},R=[],V={data(){return{show:!1,installed:!1,canInstall:!1,installEvent:null,tried:!1}},methods:{ignore(){this.show=!1},open(){document.location="web+jnutsbell://open"},triggerInstall(){this.installEvent.prompt(),this.show=!1,this.installEvent.userChoice.then((e=>{"success"==e.outcome&&(this.installed=!0,this.canInstall=!0)}))}}},q=V,F=(0,$.Z)(q,J,R,!1,null,null,null),G=F.exports,K={name:"App",components:{MainBell:O,UpdateDialog:H,InstallDialog:G},data:()=>({drawer:null,refreshing:!1,appTitle:"JðŸŒ° Bicycle Bell",type:"bariton",subscribed:void 0,subscription:null,worker:null,auto:!1}),methods:{isMobile(){return navigator.userAgentData.mobile},isApple(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},refreshPossible(e){e.detail?(this.$refs.updateDialog.show=!0,this.$refs.updateDialog.worker=e.detail):console.warn("No worker data found!")},changeBellType(){this.$refs.bell.type=this.type,this.$refs.bell.auto=this.auto,localStorage.setItem("type",this.type),localStorage.setItem("auto",this.auto)},checkInstall(){if(window.matchMedia("(display-mode: standalone)").matches)console.log("uses app");else{let e=!1;try{e=JSON.parse(localStorage.getItem("appinstalled"))}catch{console.log("install not set")}e&&(this.$refs.installDialog.show=!0,this.$refs.installDialog.installed=e)}const e=decodeURIComponent(location.search);e.includes("sopran")?(this.type="sopran",this.changeBellType()):e.includes("alt")?(this.type="alt",this.changeBellType()):e.includes("bariton")&&(this.type="bariton",this.changeBellType())}},created(){try{let e=localStorage.getItem("type");e&&(this.type=e)}catch{console.log("no old type config")}try{let e=JSON.parse(localStorage.getItem("auto"));e&&(this.auto=e)}catch{console.log("no old type config")}setTimeout((()=>{this.$refs.bell.set_config(this.auto,this.type)}),200),setTimeout(this.checkInstall,2e3),window.addEventListener("appinstalled",(()=>{localStorage.setItem("appinstalled","true")})),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),localStorage.setItem("appinstalled","false"),this.$refs.installDialog.installEvent=e,this.$refs.installDialog.canInstall=!0,this.$refs.installDialog.show=!0})),document.addEventListener("swRegistered",this.pushPossible),document.addEventListener("swUpdated",this.refreshPossible,{once:!0}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.refreshing||(this.refreshing=!0,console.log("controllerchange triggered, -> auto refresh!!"),window.location.reload())}))}},Y=K,Q=(0,$.Z)(Y,v,b,!1,null,null,null),X=Q.exports,ee=n(5205);let te=null;(0,ee.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.")},registered(e){console.log("Service worker has been registered."),te=e,setTimeout((()=>document.dispatchEvent(new CustomEvent("swRegistered",{detail:e}))),2e3),setInterval((()=>{e.update()}),6e4)},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e.waiting}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var ne=n(1705);i.ZP.use(ne.Z);var ie=new ne.Z({theme:{themes:{light:{primary:"#47a84b",secondary:"#d12424"},dark:{primary:"#47a84b",secondary:"#d12424"}}}});i.ZP.config.productionTip=!1;const oe=new i.ZP({vuetify:ie,render:e=>e(X)}).$mount("#app");oe.$vuetify.theme.dark=!0}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,s){if(!i){var l=1/0;for(h=0;h<e.length;h++){i=e[h][0],o=e[h][1],s=e[h][2];for(var r=!0,a=0;a<i.length;a++)(!1&s||l>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[a])}))?i.splice(a--,1):(r=!1,s<l&&(l=s));if(r){e.splice(h--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={826:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,l=i[0],r=i[1],a=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(a)var h=a(n)}for(t&&t(i);c<l.length;c++)s=l[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},i=self["webpackChunkj_nuts_bicycle_bell"]=self["webpackChunkj_nuts_bicycle_bell"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(6004)}));i=n.O(i)})();
//# sourceMappingURL=index.e5bd76d9.js.map